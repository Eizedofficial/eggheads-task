1. Данные для подключения хранятся в коде (а должны быть в окружении), это может привести к проблемам с:
 - Безопасностью. Из кода легче достать чувствительные данные
 - Масштабируемостью. Если делать несколько инстансов приложения, а потом менять реквизиты подключения к базе, изменения надо производить вручную в каждом инстансе
 - Здравым смыслом. Все константы, которые есть в коде, очень желательно хранить на верхнем уровне, иначе можно сойти с ума :)

2. В запросе используется небезопасная переменная, взятая из GET. Такое надо экранировать